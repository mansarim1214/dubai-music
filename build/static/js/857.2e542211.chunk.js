"use strict";(self.webpackChunkdubaimusic=self.webpackChunkdubaimusic||[]).push([[857],{2857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var i=a(5043),s=a(1462),r=a(8270),n=a(8227),l=a(6213),o=(a(3484),a(579));r.os.registerPlugin(n.s);const c=e=>{let{onNavigate:t}=e;const[a,c]=(0,i.useState)([]),[d,m]=(0,i.useState)({}),[h,u]=(0,i.useState)([]),[f,g]=(0,i.useState)({left:!1,right:!1}),v=(0,i.useRef)([]),[p,x]=(0,i.useState)(!0);(0,i.useEffect)((()=>{(async()=>{const e={Singers:["Jerome Deligero","Emily Peacock","Toi Dupras","Yvonne Park","Matt Palmer","Lina Ammor- Jevtic","Eirini Devitt","Juan Pablo Pellicer","Nick Pritchard","Mostafa Sattar","Jin Flora","Robbi McFaulds"],DJ:["Dadou","Elena","Yana Kulyk","Raphy J","DJ Stylez","DJ Melyna"],Musicians:["Ksenia Kot","Jose Ramon Nunez","Soren Lyng Hansen","Tatiana Durova","Aleksandra Dudek","Ulyana Goncharova"],Trending:["Carrie Gibson\u2019s NuvoSoul","Jaymie Deville","Chelsey Chantelle","Golden Collective","Abdallah Seleem","Dany Echemendia","Marvin Lee"]};try{x(!0);let t=(await l.A.get("https://dubaimusic.com/api/api/categories")).data;let a=(await l.A.get("https://dubaimusic.com/api/api/artists")).data.filter((e=>"published"===e.isPublished));const i=JSON.parse(localStorage.getItem("favorites"))||[],s=e=>e.sort((()=>Math.random()-.5)),r=localStorage.getItem("hasShuffled");let n=t.sort(((e,t)=>"Trending"===e.name?-1:"Trending"===t.name?1:0));if(!r){const e=n.filter((e=>"Trending"!==e.name));n=[n.find((e=>"Trending"===e.name)),...s(e)],localStorage.setItem("hasShuffled","true")}const o={};n.forEach((t=>{let n=a.filter((e=>e.category===t.name)).map((e=>({...e,isFavorite:i.some((t=>t._id===e._id))})));"Trending"===t.name?n=n.sort(((t,a)=>e.Trending.indexOf(t.title)-e.Trending.indexOf(a.title))):r||(n=s(n)),o[t.name]=n})),c(n),m(o),u(i)}catch(t){console.error("Error fetching data:",t)}finally{x(!1)}})()}),[]),(0,i.useEffect)((()=>{if(v.current.length>0){const e=()=>{v.current.forEach(((e,t)=>{if(e){const a=e.scrollWidth,i=e.clientWidth,s=e.scrollLeft;g((e=>({...e,[t]:{left:s>0,right:s<a-i}})))}}))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}}),[d,h]),(0,i.useEffect)((()=>{window.innerWidth<=500&&v.current.length>0&&v.current.forEach((e=>{e&&(r.os.killTweensOf(e),n.s.create(e,{type:"x",bounds:{minX:-e.scrollWidth+e.clientWidth,maxX:0},inertia:!0,throwProps:!0,edgeResistance:.65,onThrowUpdate:()=>{r.os.to(e,{x:e._gsap.x,ease:"power2.out"})},snap:{x:e=>200*Math.round(e/16.67)}}))}))}),[d,h]);const b=e=>h.some((t=>t._id===e._id)),S=(e,t)=>{const a=v.current[t];if(a){const i=3*(a.clientWidth/6)*e;a.scrollBy({left:i,behavior:"smooth"}),setTimeout((()=>{const e=a.scrollWidth,i=a.clientWidth,s=a.scrollLeft;g((a=>({...a,[t]:{left:s>0,right:s<e-i}})))}),500)}};return(0,o.jsx)("div",{className:"mainFront",children:(0,o.jsx)("div",{className:"container-fluid p-0",children:a.filter((e=>d[e.name]&&d[e.name].length>0)).map(((e,a)=>{var i,r,n;return(0,o.jsxs)("section",{className:"artSection",id:"musicians",children:[(0,o.jsxs)("div",{className:"div mb-2 ",children:[(0,o.jsx)("h2",{className:"artCat",children:e.name}),(0,o.jsx)("hr",{})]}),(null===(i=f[a])||void 0===i?void 0:i.left)&&(0,o.jsx)("button",{className:"arrow left react-multiple-carousel__arrow",onClick:()=>S(-1,a),children:(0,o.jsx)(s.BsChevronCompactLeft,{})}),(0,o.jsx)("div",{className:"artistCarousel px-3 mb-2",ref:e=>v.current[a]=e,style:{display:"flex",overflow:"hidden",width:"100%"},children:null===(r=d[e.name])||void 0===r?void 0:r.map((e=>(0,o.jsxs)("div",{className:"artistImage",style:{flex:"0 0 16.67%",boxSizing:"border-box",padding:"0 5px"},onClick:a=>(e=>{t&&t(`/artist/${e._id}`)})(e),children:[(0,o.jsxs)("div",{className:"artistImage",children:[e.imageUrl&&(0,o.jsx)("img",{src:`https://dubaimusic.com/api/${e.imageUrl}`,alt:e.title,width:"100%"}),(0,o.jsx)("div",{className:"artContent",children:(0,o.jsx)("h4",{className:"artTitle",children:e.title})})]}),(0,o.jsx)("div",{className:"favoriteIcon",children:(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=JSON.parse(localStorage.getItem("favorites"))||[],a=t.some((t=>t._id===e._id))?t.filter((t=>t._id!==e._id)):[...t,e];u(a),localStorage.setItem("favorites",JSON.stringify(a))})(e)},children:b(e)?(0,o.jsx)(s.BsHeartFill,{className:"favorited"}):(0,o.jsx)(s.BsHeartFill,{className:"heartIcon"})})})]},e._id)))}),(null===(n=f[a])||void 0===n?void 0:n.right)&&(0,o.jsx)("button",{className:"arrow right react-multiple-carousel__arrow",onClick:()=>S(1,a),children:(0,o.jsx)(s.BsChevronCompactRight,{})})]},e._id)}))})})}}}]);
//# sourceMappingURL=857.2e542211.chunk.js.map